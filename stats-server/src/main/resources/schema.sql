DROP TABLE IF EXISTS endpoint_stat, apps;

CREATE TABLE IF NOT EXISTS apps (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    app VARCHAR(100) NOT NULL,
    CONSTRAINT pk_apps_id PRIMARY KEY (id),
    CONSTRAINT uq_app_name UNIQUE (app)
);

CREATE TABLE IF NOT EXISTS endpoint_stat (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    app BIGINT REFERENCES apps(id),
    uri VARCHAR(500) NOT NULL,
    ip VARCHAR(50) NOT NULL,
    timestamp TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    CONSTRAINT pk_endpoint_stat_id UNIQUE (id)
);